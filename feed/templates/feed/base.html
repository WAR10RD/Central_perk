{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    {% block css  %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
   
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="icon" href="{% static 'feed/img/brand/favicon.png' %}" type="image/png">
  
  <link rel="stylesheet" href="{% static 'feed/vendor/nucleo/css/nucleo.css' %}" type="text/css">
  <link rel="stylesheet" href="{% static 'feed/vendor/@fortawesome/fontawesome-free/css/all.min.css' %}" type="text/css">
  <!-- Argon CSS -->
  <link rel="stylesheet" href="{% static 'feed/css/argon.css' %}" type="text/css">

  
  <!-- my css code -->

  <link id="mystylesheet" rel="stylesheet" type="text/css" href="{% static 'feed/css/style.css' %}">  
  
  
  
{% endblock %}
    
    <title>Central Perk</title>
  </head>
  
<body class="body-tag">
    <!--Navbar -->
    <!-- <div class="wrapper"> -->
      <!-- Topnav -->
  
      {% if user.is_authenticated %}
      
    <div>
      <nav class="navbar navbar-top navbar-expand navbar-dark bg-default border-bottom">
        <div class="container-fluid">
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <!-- add icon here -->
            <!-- Search form -->
            <form class="navbar-search navbar-search-light form-inline mr-sm-3 ml-auto" id="navbar-search-main" method="POST"
            action="{% url 'search_posts' %}">
            {% csrf_token %}
              <div class="form-group mb-0 ">
                <div class="input-group input-group-alternative input-group-merge">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                  </div>
                  <input class="form-control" placeholder="Search" name="searched" type="text">
                </div>
              </div>
              <button type="button" class="close" data-action="search-close" data-target="#navbar-search-main" aria-label="Close">
                <span aria-hidden="true">Ã—</span>
              </button>
            </form>
            
            <!-- Navbar links -->
            
            {% if user.is_authenticated %}
            <ul class="navbar-nav align-items-center  ml-auto ml-md-0 ">
              <li class="nav-item dropdown">
                <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <div class="media align-items-center">
                    <span class=" rounded-circle">
                      <img src="{{ user.profile.image.url }}" class=" avatar rounded-circle">
                    </span>
                    <div class="media-body  ml-2  d-none d-lg-block">
                      <span class="mb-0 text-sm  font-weight-bold text-uppercase">{{ user.profile.user }}</span>
                    </div>
                  </div>
                </a>
                <div class="dropdown-menu  dropdown-menu-right ">
                  <div class="dropdown-header noti-title">
                    <h6 class="text-overflow m-0">Welcome!</h6>
                  </div>
                  <a href="{% url 'my_profile' %}" class="dropdown-item">
                    <i class="ni ni-single-02"></i>
                    <span>My Profile</span>
                  </a>
                  <a class="dropdown-item" href="#" onclick="swapTheme()">
                    <i id="darkModeIcon" class="fas fa-moon"></i>
                    <span id="dark_button">Enable Dark Mode</span>
                  </a>
                  
                  <!-- <a class="dropdown-item" onclick="swapStyleLight()">
                    <i class="ni ni-settings-gear-65"></i>
                    <span id="darkModeButton">Enable Light Mode</span>
                  </a> -->
                  <a href="{% url 'edit_profile' %}" class="dropdown-item">
                    <i class="ni ni-settings-gear-65"></i>
                    <span>Settings</span>
                  </a>
                  <!-- <button class="btn btn-light" onclick="swapStyleLight()">Light Mode</button>
		              <button class="btn btn-dark" onclick="swapStyleDark()">Dark Mode</button> -->
                  <!-- <a href="#!" class="dropdown-item">
                    <i class="ni ni-calendar-grid-58"></i>
                    <span>Activity</span>
                  </a> -->
                  <!-- <a href="#!" class="dropdown-item">
                    <i class="ni ni-support-16"></i>
                    <span>Support</span>
                  </a> -->
                  <div class="dropdown-divider"></div>
                  <a href="{% url 'logout' %}" class="dropdown-item">
                    <i class="ni ni-user-run"></i>
                    <span>Logout</span>
                  </a>
                </div>
              </li>
            </ul>
            {% endif %} 
          </div>
        </div>
      </nav>
    </div>
    
      {% endif %}
<!-- <div class="justify-content-center"> -->
  <!-- <div class="container-fluid d-flex justify-content-between"> -->
<!-- <div class="sidebar">
  <div>Menu Item 1</div>
  <div>Menu Item 2</div>
  <div>Menu Item 3</div>
</div>  -->
  <!-- </div> -->
  <div class="flex-container">
  {% if user.is_authenticated %}
      
  <div class = "leftbox ">
    <!-- <div class="sidebar-left "> -->
    
    <ul>
      <li class="spacing"> <i class="fa fa-home px-3 tag-color"  aria-hidden="true"></i><a href="/" class="tag-color  font-style">Home</a></li>
      <!-- <li><a href="#" class="tag-color font-style">Inbox</a></li> -->
      <li class="spacing"> <i class="fa fa-inbox px-3 tag-color"  aria-hidden="true"></i><a href="/messages" class="tag-color font-style ">Inbox</a></li>
      <li class="spacing"> <i class="fa fa-inbox px-3 tag-color"  aria-hidden="true"></i><a href="/follow-list" class="tag-color font-style ">Followers</a></li>
      <li class="spacing"><i class="fa fa-user px-3 tag-color"  aria-hidden="true"></i><a href="{% url 'my_profile' %}" class="tag-color font-style ">Profile</a></li>
      <li class="spacing"><i class="fa fa-tools px-3 tag-color"  aria-hidden="true"></i><a href="{% url 'edit_profile' %}" class="tag-color font-style  ">Settings</a></li>
      
    </ul>
  <!-- </div> -->
</div> 

{% endif %}
<div class = "middlebox">
  {% block content %}
      
  <!-- body content -->
 
{% endblock content %}
</div>
{% if user.is_authenticated %}
        
<div class = "rightbox ">
  <div class="sidebar-right">

    {% if whoToFollow %}
  <div class="createPost">
    <h1 class="tag-color">Popular People to Follow</h1>
    <hr class="m-1">
    {% for  user_profile in whoToFollow %}

    {% if user_profile == request.user.profile %}

    {% else %}
    <div class="card-body no-padding-tlr ">
      <a href="{{ user_profile.get_absolute_url }}" class="post-details">
        <img src="{{ user_profile.image.url }}" class="avatar rounded-circle"  alt=""/>

      </a>

      <a class="text-dark post-details" href="{{ user_profile.get_absolute_url }}">
        <b class="post-details ml-1 text-uppercase">{{ user_profile }}</b>
        <!-- <b class="post-details">@{{ post.user_name }}</b> -->
      </a>
      
     
    
    <small class="float-right mr-2">
      {% if user_profile not in request.user.profile.followings.all %}
        <small >
          <a class="btn btn-primary basic-mod btn-block btn-circled" href="{% url 'follow_request' user_profile.id %}" >Follow</a>
          </small >
      {% else %}
        <small><a class="btn btn-secondary basic-mod btn-block btn-circled" href=" {% url 'un_follow_request' user_profile.id %}">Following</a></small>
      
        {% endif %}
    </small>
  </div>
    {% endif %}

    <!-- <div ><a href="{{ i.get_absolute_url }}" class="tag-color">{{i}}</a></div> -->
    {% endfor %}
    </div>
    {% endif %}
    
    
    
  
    <!-- <div ><a href="#" class="tag-color">user2 </a></div>
    <div ><a href="#" class="tag-color">user3</a></div> -->
  </div>  
</div>

      {% endif %}
    </div>
  <!-- <div class="body-text post">
    hello  -->
    <!-- <div class="justify-content-md-between"> -->
      
    <!-- </div> -->
     <!-- <div class="d-flex justify-content-end"> -->
     <!-- <div class="right-sidebar">
      hello 
     </div> -->
     <!-- </div> -->
  <!-- </div> -->
  <!-- </div> -->
</body>
  <!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script> -->
      <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script> -->
      <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script> -->
      
      <script src="{% static 'feed/js/jqurey.js' %}"></script>
      <!-- <script src="{% static 'feed/js/dark-mode-switch.min.js' %}"></script> -->
      <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
      
      <script type="text/javascript">

        var setTheme = localStorage.getItem('theme')
        var iconId = 'darkModeIcon'
        console.log('theme:', setTheme)
        
                
        if (setTheme == null){
          swapStyle()
          document.getElementById('dark_button').textContent = "Enable Dark Mode"
          document.getElementById(iconId).className = "fas fa-moon"; 
          
        }
        else if(setTheme == '/static/feed/css/style.css'){
         swapStyleLight()
         document.getElementById('dark_button').textContent = "Enable Dark Mode"
         document.getElementById(iconId).className = "fas fa-moon";
        }else{
          swapStyleDark()
          document.getElementById('dark_button').textContent = "Disable Dark Mode"
          document.getElementById(iconId).className = "fas fa-sun";
        }
        
        function swapTheme(){
          
          console.log("id is ",iconId)
          var text = document.getElementById('dark_button').innerText

          if (text == "Enable Dark Mode"){
            swapStyleDark()
            document.getElementById('dark_button').textContent = "Disable Dark Mode"
            document.getElementById(iconId).className = "fas fa-sun";
          }else if(text == "Disable Dark Mode"){
            swapStyleLight()
            document.getElementById('dark_button').textContent = "Enable Dark Mode"
            document.getElementById(iconId).className = "fas fa-moon";
          }
          
        }

        //function swapStyle(){
          
        //}

        function swapStyleLight(){
          sheet = "{% static 'feed/css/style.css' %}"
          document.getElementById('mystylesheet').href = sheet
          localStorage.setItem('theme', sheet)
        }
        function swapStyleDark(){
          sheet = "{% static 'feed/css/DarkStyle.css' %}"
          document.getElementById('mystylesheet').href = sheet
          localStorage.setItem('theme', sheet)
        }
    
    
        
        
      </script>
      {% block jsfiles %}{% endblock jsfiles %}
  <!-- Argon Scripts -->
  <!-- Core -->
  <!-- <script src="assets/vendor/jquery/dist/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/js-cookie/js.cookie.js"></script>
  <script src="assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
  <script src="assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script> -->
  <!-- Argon JS -->
  <!-- <script src="assets/js/argon.js"></script> -->

  <!-- JS Files -->



</html>
